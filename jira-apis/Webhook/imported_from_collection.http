#!/usr/bin/env dothttp

# imported from https://www.getpostman.com/collections/d8ed5a08800a7e606296

@name("Get Dynamic Webhooks For App")
GET "None://{{baseUrl}}/rest/api/3/webhook"
? "startAt"= "0"
? "maxResults"= "100"


@name("Register Dynamic Webhooks")
POST "{{baseUrl}}/rest/api/3/webhook"
"Content-Type": "application/json"
data('{
    "url": "<string>",
    "webhooks": [
        {
            "events": [
                "<string>",
                "<string>"
            ],
            "jqlFilter": "<string>"
        },
        {
            "events": [
                "<string>",
                "<string>"
            ],
            "jqlFilter": "<string>"
        }
    ]
}')


@name("Delete Webhooks By Id")
DELETE "{{baseUrl}}/rest/api/3/webhook"
"Content-Type": "application/json"
data('{
    "webhookIds": [
        "<long>",
        "<long>"
    ]
}')


@name("Get Failed Webhooks")
GET "None://{{baseUrl}}/rest/api/3/webhook/failed"
? "maxResults"= "<integer>"
? "after"= "<long>"


@name("Extend Webhook Life")
PUT "{{baseUrl}}/rest/api/3/webhook/refresh"
"Content-Type": "application/json"
data('{
    "webhookIds": [
        "<long>",
        "<long>"
    ]
}')



